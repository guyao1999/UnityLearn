### 学妹2

[TOC]



#### 添加一个活动

> 1. 在enums.lua中添加活动id
>
> 2. 在activity.lua中添加这个活动的属性
>
>    > **活动的icon** 
>    >
>    > **活动的类型**
>
> 3. ActivityDatas.lua中添加这个活动的**数据类 +活动的json表+活动的预制体(常用的)**
>
>    > ActivityDragonBoatFeitan
>
> 4. **ActivityWindow**.lua中添加这个活动的**功能类**  ---在这里声明预制体的存放路径
>
>    > ActivityDragonBoatFeitan
>
> 5. activity_text_zh_tw.lua中添加这个活动的名称
>
>    > **活动的title**
>
> 6. Hot/Res/Prefabs/Windows/activity文件夹下添加活动的**预制体**
>
>    > activity_dragonboatfeitan
>
> 7. Lua/app/windows/activity文件夹下创建这个活动的**功能类**--用于实现活动中的交互
>
>    > ActivityDragonBoatFeitan.lua
>
> 8. Lua/app/models/datas文件夹下创建这个活动的**数据类**-----用于得到活动的数据
>
>    > ActivityDragonBoatFeitanData.lua
>
> 9. Lua/data/tables文件夹下创建这个活动的**信息表**----用于存放活动信息
>
>    > activity_dragonboat2022.lua
>    >
>    > 存放这个活动中会用到的礼品id以及数量等信息
>
> 10. Lua/app/common/tables文件下创建这个活动的**信息处理类**，继承自BaseTable和上面的信息表
>
>     > ActivityDragonBoatFeitanTable.lua
>     >
>     > 用于得到上述**信息表**中的数据
>
> 11. 在Activity.lua文件中修改参数那行的活动的数据来在自己的活动进行显示
>

#### 关系

> Activity类
>
> > ActivityTowerFundGiftBag.lua---------------------------ActivityTowerFundGiftBag2.lua
>
> Data类
>
> > ActivityTowerFundGiftBag.lua---------------------------ActivityTowerFundGiftBag2.lua----------**用于和后端进行数据的交互**
>
> table类+table表
>
> > ActivityTowerFundGiftBagTable.lua-------------------ActivityTowerFundGiftBagTable2.lua--**用于处理table表中的数据**
> >
> > 在tableManger中进行注册
>
> Window类
>
> > TowerFundGiftbagWindow.lua------------------------TowerFundGiftbagWindow2.lua------没有被用到
>
> 对于活动，通过活动id和绑定的类来进行处理，ActivityWindow来处理
>
> 对于窗体，通过在window.lua中配置窗体类和窗体的预制体，WindowManager来处理

#### 创建一个窗口

> 创建这个窗口的预制体activity_chime_previw_window
>
> 创建这个窗口的数据表 activity_chime_dropbox.lua
>
> 创建这个表的管理函数 activityChimeDropboxTable.lua
>
> 在TableManager.lua注册这个表
>
> 创建窗体预制体的管理类ActivityChimePreviwWindow.lua
>
> 在window.lua中注册这个窗体的名字，类名，预制体的名字，类型等信息

#### 读一张表的数据

> Lua/data/tables文件夹下创建这个活动的**信息表**----用于存放活动信息
>
> > activity_dragonboat2022.lua
> >
> > 存放这个活动中会用到的礼品id以及数量等信息
> >
> > **这个表由策划配置，跑脚本得到**
>
> Lua/app/common/tables文件下创建这个活动的**信息处理类**，继承自BaseTable和上面的信息表
>
> > ActivityDragonBoatFeitanTable.lua
> >
> > 用于得到上述**信息表**中的数据
>
> 在TableManager中进行注册
>

#### 打开一个窗口

> openWindow(name,params,callback,skipAnimation)--->addWindow(window)---->checkMainWindowSound()--->recordWIndow()------>checkWndRes()
>
>  

#### 换皮步骤

> 修改预制体
>
> > 添加背景图---Texture/Scneweb文件夹中
> >
> > 添加特效----?
>
> 添加图集：
>
> >  在Unity中生成图集
> >
> > 运行sprites2atals.abt脚本，将图集中的引用添加到Sprite2Atals.lua文件夹中，方便精灵的异步加载
>
> 修改代码

#### 图集

> scenes_web-------------------------------scene_to_1024.bat
>
> scenes_big_web-------------------------scene_to_2048.bat
>
> common_ui_texture_web-----------scene_to_all_size_auto.bat

### Lua

> heroIcon   
>
> partner_card--group  
>
> partner_detail_window---potentialityCardStar !!!!!
>
> utils
>
> partnerTable !!!!
>
> potentialityComponent  !!!!!!

#### 修改proto

> 修改message.proto
>
> 运行proto2lua文件
>
> 提交message.proto文件
>
> 提交config/protos/messages_pb文件
>
> 提交Asset/Lua/data/protos/messages_pb.lua文件



删除图集

保存预制体，删除预制体

删除对window的修改







